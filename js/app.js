!function(){angular.module("serverCP",["routes","Data","Graphs","graphsDirective","authCtrl","ordersCtrl","navbar","ordersTable","membersCtrl","membersTable","activationsCtrl","activationsTable","logsCtrl","versionsCtrl","graphViewCtrl","reportingCtrl"]).run(["$http","$httpParamSerializerJQLike",function(e,t){e.defaults.transformRequest.unshift(t)}]).config(["$httpProvider",function(e){e.defaults.withCredentials=!0}]).run(["$rootScope","$location","Data",function(e,t,a){e.$on("$routeChangeStart",function(r,o,n){e.authenticated=!1,a.get("getSessionState").then(function(r){if(r.uid)e.authenticated=!0,e.uid=r.uid,e.name=r.name,e.email=r.email,e.appList=JSON.parse(r.appList),e.appList.splice(0,0,{id:"",title:""}),e.nums={tweets:r.num_tweets,feedback:r.num_feedback,logs:r.num_logs},e.logout=function(){console.log("logout"),a.get("logout").then(function(e){t.path("/login")})},o.$$route&&"/"==o.$$route.originalPath&&t.path("/dashboard");else{var n=o.$$route.originalPath;"/signup"==n||"/login"==n||t.path("/login")}})})}])}(),function(){angular.module("routes",["ngRoute","dashboardCtrl"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/login",{title:"Login",templateUrl:"partials/pages/login.html",controller:"authCtrl"}).when("/logout",{title:"Logout",templateUrl:"partials/pages/login.html",controller:"authCtrl"}).when("/signup",{title:"Signup",templateUrl:"partials/pages/signup.html",controller:"authCtrl"}).when("/dashboard",{title:"Dashboard",templateUrl:"partials/pages/dashboard.html",controller:"dashboardCtrl"}).when("/versions",{title:"Versions",templateUrl:"partials/pages/versions.html",controller:"versionsCtrl",reloadOnSearch:!1}).when("/reports/:category?",{title:"Reporing & Graphs",templateUrl:"partials/pages/reporting.html",controller:"reportingCtrl",reloadOnSearch:!1}).when("/orders/",{title:"Orders",templateUrl:"partials/pages/orders.html",controller:"ordersCtrl",reloadOnSearch:!1}).when("/members",{title:"Members",templateUrl:"partials/pages/members.html",controller:"membersCtrl",reloadOnSearch:!1}).when("/activations",{title:"Activations",templateUrl:"partials/pages/activations.html",controller:"activationsCtrl",reloadOnSearch:!1}).when("/logs",{title:"Logs",templateUrl:"partials/pages/logs.html",controller:"logsCtrl",reloadOnSearch:!1}).when("/",{title:"Loading",templateUrl:"partials/pages/loading.html",controller:"authCtrl",role:"0"}).otherwise({redirectTo:"/"})}])}(),angular.module("toaster",["ngAnimate"]).service("toaster",["$rootScope",function(e){this.pop=function(t,a,r,o,n){this.toast={type:t,title:a,body:r,timeout:o,bodyOutputType:n},e.$broadcast("toaster-newToast")},this.popSimple=function(e,t,a,r){this.pop(e,t,a,r,"trustedHtml")},this.clear=function(){e.$broadcast("toaster-clearToasts")}}]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message"}).directive("toasterContainer",["$compile","$timeout","$sce","toasterConfig","toaster",function(e,t,a,r,o){return{replace:!0,restrict:"EA",link:function(e,n,i){function s(t){switch(t.type=p["icon-classes"][t.type],t.type||(t.type=p["icon-class"]),c++,angular.extend(t,{id:c}),t.bodyOutputType=t.bodyOutputType||p["body-output-type"],t.bodyOutputType){case"trustedHtml":t.html=a.trustAsHtml(t.body);break;case"template":t.bodyTemplate=t.body||p["body-template"]}e.configureTimer(t),p["newest-on-top"]===!0?(e.toasters.unshift(t),p.limit>0&&e.toasters.length>p.limit&&e.toasters.pop()):(e.toasters.push(t),p.limit>0&&e.toasters.length>p.limit&&e.toasters.shift())}function l(a,r){a.timeout=t(function(){e.removeToast(a.id)},r)}var c=0,p=r;i.toasterOptions&&angular.extend(p,e.$eval(i.toasterOptions)),e.config={position:p["position-class"],title:p["title-class"],message:p["message-class"],tap:p["tap-to-dismiss"]},e.configureTimer=function(e){var t="number"==typeof e.timeout?e.timeout:p["time-out"];t>0&&l(e,t)},e.toasters=[],e.$on("toaster-newToast",function(){s(o.toast)}),e.$on("toaster-clearToasts",function(){e.toasters.splice(0,e.toasters.length)})},controller:["$scope","$element","$attrs",function(e,a,r){e.stopTimer=function(e){e.timeout&&(t.cancel(e.timeout),e.timeout=null)},e.restartTimer=function(t){t.timeout||e.configureTimer(t)},e.removeToast=function(t){var a=0;for(a;a<e.toasters.length&&e.toasters[a].id!==t;a++);e.toasters.splice(a,1)},e.remove=function(t){e.config.tap===!0&&e.removeToast(t)}}],template:'<div  id="toast-container" ng-class="config.position"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="remove(toaster.id)" ng-mouseover="stopTimer(toaster)"  ng-mouseout="restartTimer(toaster)"><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}]),angular.module("activationsCtrl",[]).controller("activationsCtrl",["$scope","Graphs",function(e,t){}]),angular.module("authCtrl",[]).controller("authCtrl",["$scope","$rootScope","$routeParams","$location","$http","Data",function(e,t,a,r,o,n){e.login={},e.signup={},e.doLogin=function(e){n.post("login",{form:e}).then(function(e){r.path("dashboard")})},e.signup={email:"",password:"",name:"",phone:"",address:""},e.signUp=function(e){n.post("signUp",{customer:e}).then(function(e){"success"==e.status?r.path("home"):toaster.popSimple("error","Error",""+e.message+" results",5e3)})}}]),angular.module("dashboardCtrl",["timeMathFltr","appsTable","orderViewCtrl","memberFuncs","orderFuncs"]).controller("dashboardCtrl",["$scope","$rootScope","$routeParams","$location","$http","Data","Graphs","$uibModal","memberFuncs","orderFuncs",function(e,t,a,r,o,n,i,s,l,c){e.orders={},e.total={},e.getRecentOrders=function(t){n.post("getRecentOrders",{orderID:t}).then(function(t){e.orders=JSON.parse(t.message),e.totalOrders=t.total})},e.appList=function(){return t.appList},e.getAppName=function(t){return e.appList()?e.appList()[t].title:""},e.openOrder=function(t){c.viewOrder(t,e.orders)}}]),angular.module("logsCtrl",["ui.bootstrap","logsSystemTable","logsFailureTable","logsDeactTable","logsCIDTable","threeButtonBar"]).controller("logsCtrl",["$scope","Graphs",function(e,t){}]),angular.module("membersCtrl",[]).controller("membersCtrl",["$scope","Graphs",function(e,t){e.graphs={},e.getGraphs=function(a){t.get(a).then(function(t){e.graphs=t})},e.viewGraph=t.viewGraph}]),angular.module("ordersCtrl",[]).controller("ordersCtrl",["$scope","Graphs",function(e,t){e.graphs={},e.getGraphs=function(a){t.get(a).then(function(t){e.graphs=t})},e.viewGraph=t.viewGraph}]),angular.module("reportingCtrl",["timeMathFltr","ui.bootstrap","bootstrap.tabset","chart.js"]).controller("reportingCtrl",["$scope","$rootScope","$routeParams","$location","$http","Data","Graphs","$timeout",function(e,t,a,r,o,n,i,s){String.prototype.splice||(String.prototype.splice=function(e,t,a){return this.slice(0,e)+a+this.slice(e+Math.abs(t))})}]),angular.module("versionsCtrl",["timeMathFltr","ui.bootstrap","versionsAppTable","versionsGameTable","versionsUnknownTable"]).controller("versionsCtrl",["$scope","$rootScope","$routeParams","$location","$http","Data","Graphs",function(e,t,a,r,o,n,i){e.graphs={},e.getGraphs=function(t){i.get(t).then(function(t){e.graphs=t})},e.viewGraph=i.viewGraph}]),function(){angular.module("navbar",[]).directive("renderNavbar",function(){return{restrict:"E",templateUrl:"partials/header/navbar.html",controller:["$scope","$location",function(e,t){e.isActive=function(e){return 0==t.path().indexOf(e)}}],controllerAs:"navbarCtrl"}})}(),function(){"use strict";angular.module("bootstrap.tabset",[]).directive("tabset",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{tabsType:"@"},link:function(e,t,a,r){e.tabsType=a.tabsType},controller:["$scope","$location","$routeParams","Graphs",function(e,t,a,r){e.templateUrl="";var o=e.tabs=[],n=this,i=t.search()[e.tabsType];this.selectTab=function(e){angular.forEach(o,function(e){e.selected=!1}),e.selected=!0,e.$parent.$parent.selectedTab=e.title.toLowerCase()},this.setTabTemplate=function(t){e.templateUrl=t},this.addTab=function(e){0==o.length&&n.selectTab(e),o.push(e),i&&e.title.toLowerCase()===i&&n.selectTab(e)},e.viewGraph=r.viewGraph}],template:'<div class="row-fluid"><div class="row-fluid"><div class="nav nav-tabs" ng-transclude></div></div><div class="row-fluid"><ng-include src="templateUrl"></ng-include></div></div>'}}).directive("tab",["$location",function(e){return{restrict:"E",replace:!0,require:"^tabset",scope:{title:"@",templateUrl:"@"},link:function(t,a,r,o){o.addTab(t),t.select=function(){t.$parent.$parent.tabsType&&e.search(t.$parent.$parent.tabsType,t.title.toLowerCase()),o.selectTab(t)},t.$watch("selected",function(){t.selected&&o.setTabTemplate(t.templateUrl)})},template:'<li ng-class="{active: selected}"><a href="" ng-click="select()">{{ title }}</a></li>'}}])}(),function(){angular.module("timeMathFltr",[]).filter("timeSince",function(){return function(e){switch(typeof e){case"number":break;case"string":e=+new Date(e.replace(/-/g,"/")),e=+new Date(e);break;case"object":e.constructor===Date&&(e=e.getTime());break;default:e=+new Date}var t=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"Yesterday","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"Last month","Next month"],[29030400,"months",2419200],[58060800,"Last year","Next year"],[290304e4,"years",29030400],[580608e4,"Last century","Next century"],[580608e5,"centuries",290304e4]],a=(+new Date-e)/1e3,r="ago",o=1;if(0==a)return"Just now";0>a&&(a=Math.abs(a),r="from now",o=2);for(var n,i=0;n=t[i++];)if(a<n[0])return"string"==typeof n[2]?n[o]:Math.floor(a/n[2])+" "+n[1]+" "+r;return e}}).filter("cleanDt",function(){return function(e){return new Date(e)}})}(),function(){angular.module("Data",["toaster"]).factory("Data",["$http","toaster",function(e,t){var a="API/",r=(new Date).getTime();r="?&i="+r;var o={};return o.toast=function(e){t.pop(e.status,"",e.message,5e3,"trustedHtml"),t.pop(e.status,"Get",JSON.stringify(e.server.get_params),5e3,"trustedHtml"),t.pop(e.status,"Post",JSON.stringify(e.server.post_params),5e3,"trustedHtml")},o.toastMsg=function(e,a){t.pop(e,"",a,2e3,"trustedHtml")},o.get=function(t){return e.get(a+t+r).then(function(e){return e.data})},o.post=function(o,n){return e({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:a+o+r,data:n})["catch"](function(e){console.log("POST failure",e),t.popSimple("error","Server Error","Task request failed!",5e3)}).then(function(e){return e.data&&"success"==e.data.status?e.data:(200!=e.status?(t.popSimple("error",e.data.taskID+" error","Unexpected server error: "+e.status,5e3),console.error("Unexpected server response HTTP"+e.status)):(401==e.data.code?console.error("Task Request Failed: "+e.data.message):t.popSimple("error",e.data.taskID+" task error",e.data.message,5e3),console.error("Response: "+JSON.stringify(e.data))),e.data)})},o.put=function(t,r){return e.put(a+t,r).then(function(e){return console.log("put: "+JSON.stringify(e.data)),e.data})},o["delete"]=function(t){return e["delete"](a+t).then(function(e){return e.data})},o}])}(),function(){angular.module("Graphs",["Data"]).factory("Graphs",["Data","$uibModal",function(e,t){var a={};return a.get=function(t){return e.post("getGraphs",{form:{graph_ids:t}}).then(function(e){return JSON.parse(e.message)})},a.getSingle=function(t){return e.post("getGraphs",{form:{graph_ids:t.name},graph_desc:t.desc}).then(function(e){var t=JSON.parse(e.message);return t[e.server.post_params.form.graph_ids].desc=e.server.post_params.graph_desc,t})},a.viewGraph=function(e,a){t.open({animation:!0,templateUrl:"partials/pages/tables/sub/graphView.html",controller:"graphViewCtrl",size:"lg",resolve:{graphURL:function(){return e},graphLabel:function(){return a}}})},a}])}(),function(){angular.module("memberFuncs",["Data"]).factory("memberFuncs",["Data","$uibModal",function(e,t){var a={};return a.get=function(e){console.log("-- get function")},a.viewMember=function(e,a){var r={};if(a&&e){for(var o=0,n=a.length;n>o;o++)if(a[o].member_id===e){var r=a[o];break}!r.member_email}else e||(e=0);var i=t.open({animation:!0,templateUrl:"partials/pages/tables/sub/memberView.html",controller:"memberViewCtrl",size:"lg",windowClass:"app-modal-window",resolve:{member:function(){return r},memberID:function(){return e}}});i.rendered.then(function(e){$(".modal .modal-body").css("overflow-y","auto"),$(".modal .modal-body").css("max-height",.7*$(window).height()),$(".modal .modal-body").css("height",.7*$(window).height())}),i.result.then(function(e){if("openOrder"===e.action){debugger;$scope.openOrder(e.data)}},function(){console.log("Modal dismissed at: "+new Date)})},a}])}(),function(){angular.module("orderFuncs",["Data","memberFuncs"]).factory("orderFuncs",["Data","$uibModal","memberFuncs",function(e,t,a){var r={};return r.get=function(e){console.log("-- get function")},r.resendConfirmationEmail=function(t,a){var r="",o="";t?(console.log("via orderID"),r="orderID",o=t):a&&(console.log("via memberID"),r="memberID",o=a),e.toastMsg("info","Preparing request"),e.post("resendConfirmation",{viaID:o,viaIDType:r}).then(function(t){e.toastMsg(t.status,t.message)})},r.regenerateKey=function(t,a){var r="",o="";return t?(console.log("via orderID"),r="orderID",o=t):a&&(console.log("via memberID"),r="memberID",o=a),e.post("regenerateKey",{viaID:o,viaIDType:r})},r.setDeactivated=function(t,a,r){var o="",n="";return t?(console.log("via orderID"),o="orderID",n=t):a&&(console.log("via memberID"),o="memberID",n=a),e.post("setDeactivated",{viaID:n,viaIDType:o,setDeactivated:r})},r.viewOrder=function(e,r){var o={};if(r&&e){for(var n=0,i=r.length;i>n;n++)if(r[n].order_id===e){var o=r[n];break}!o.business}else e||(e=0);var s=t.open({animation:!0,templateUrl:"partials/pages/tables/sub/orderView.html",controller:"orderViewCtrl",size:"lg",windowClass:"app-modal-window",resolve:{order:function(){return o},orderID:function(){return e}}});s.rendered.then(function(e){$(".modal .modal-body").css("overflow-y","auto"),$(".modal .modal-body").css("max-height",.7*$(window).height()),$(".modal .modal-body").css("height",.7*$(window).height())}),s.result.then(function(e){"viewMember"===e.action&&a.viewMember(e.data,[])},function(){console.log("Modal dismissed at: "+new Date)})},r}])}(),function(){angular.module("versionFuncs",["Data","appVersionViewCtrl","gameVersionViewCtrl","unknownVersionViewCtrl"]).factory("versionFuncs",["Data","$uibModal",function(e,t){var a={};return a.get=function(e){console.log("-- get function")},a.regenerateKey=function(t,a){var r="",o="";return t?(console.log("via hash_id"),r="hash_id",o=t):a&&(console.log("via memberID"),r="memberID",o=a),e.post("regenerateKey",{viaID:o,viaIDType:r})},a.viewAppVersion=function(a,r,o,n){var i={};if(o&&a){for(var s=0,l=o.length;l>s;s++)if(o[s].hash_id===a){var i=o[s];break}!i.hash_string}else a||(a=0);var c=t.open({animation:!0,templateUrl:"partials/pages/tables/sub/appVersionView.html",controller:"appVersionViewCtrl",size:"lg",windowClass:"app-modal-window",resolve:{appVersion:function(){return i},hash_id:function(){return a},app_list:function(){return n}}});return c.rendered.then(function(e){$(".modal .modal-body").css("overflow-y","auto"),$(".modal .modal-body").css("max-height",.7*$(window).height()),$(".modal .modal-body").css("height",.7*$(window).height())}),c.result.then(function(t){return"update"===t.action||"create"===t.action||"delete"===t.action?(e.toastMsg("info","Sending "+t.action+" request..."),e.post("version",{updateObject:t.data,updateID:t.data.id,versionType:t.versionType,action:t.action}).then(function(t){return e.toastMsg("success","App Version Saved"),t})):void e.toastMsg("error","Unhandled result!")},function(){console.log("Modal dismissed at: "+new Date)})},a.viewGameVersion=function(a,r,o){var n={};if(r&&a){for(var i=0,s=r.length;s>i;i++)if(r[i].game_id===a){var n=r[i];break}!n.vers_bytes}else a||(a=0);var l=t.open({animation:!0,templateUrl:"partials/pages/tables/sub/gameVersionView.html",controller:"gameVersionViewCtrl",size:"lg",windowClass:"app-modal-window",resolve:{gameVersion:function(){return n},game_id:function(){return a},app_list:function(){return o}}});return l.rendered.then(function(e){$(".modal .modal-body").css("overflow-y","auto"),$(".modal .modal-body").css("max-height",.7*$(window).height()),$(".modal .modal-body").css("height",.7*$(window).height())}),l.result.then(function(t){return"update"===t.action||"create"===t.action||"delete"===t.action?(e.toastMsg("info","Sending "+t.action+" request..."),e.post("version",{updateObject:t.data,updateID:t.data.id,versionType:t.versionType,action:t.action}).then(function(t){return e.toastMsg("success","Game Version Saved"),t})):void e.toastMsg("error","Unhandled result!")},function(){console.log("Modal dismissed at: "+new Date)})},a.viewUnknownVersion=function(a,r){var o={};if(r&&a){for(var n=0,i=r.length;i>n;n++)if(r[n].id===a){var o=r[n];break}!o.vers_bytes}else a||(a=0);var s=t.open({animation:!0,templateUrl:"partials/pages/tables/sub/unknownVersionView.html",controller:"unknownVersionViewCtrl",size:"lg",windowClass:"app-modal-window",resolve:{unknownVersion:function(){return o},id:function(){return a}}});return s.rendered.then(function(e){$(".modal .modal-body").css("overflow-y","auto"),$(".modal .modal-body").css("max-height",.7*$(window).height()),$(".modal .modal-body").css("height",.7*$(window).height())}),s.result.then(function(t){return"update"===t.action?(e.toastMsg("info","Sending "+t.action+" request..."),e.post("version",{updateObject:t.data,updateID:t.data.id,versionType:t.versionType,action:t.action}).then(function(t){return e.toastMsg("success","Unknown Version Saved"),t})):void e.toastMsg("error","Unhandled result!")},function(){console.log("Modal dismissed at: "+new Date)})},a}])}(),angular.module("appVersionViewCtrl",["timeMathFltr","confirm"]).controller("appVersionViewCtrl",["$scope","$uibModalInstance","appVersion","hash_id","$timeout","app_list","$rootScope",function(e,t,a,r,o,n,i){function s(){e.autoExpand("comments")}e.appVersion_original=a,e.appVersion=Object.create(a),e.appVersion.id=r,e.app_list=n,e.newappVersion="Viewing App Version: ",e.saveLabel="Save",e.saveAction="update",e.versionType="app",e.toggleActLabel="Deactivate",e.appVersion.id||(delete e.appVersion.id,e.saveLabel="Publish",e.saveAction="create",e.newappVersion="New App Version",e.appVersion.added_by=i.uid),e.appVersion_original=angular.copy(e.appVersion),"0"==e.appVersion.active&&(e.toggleActLabel="Activate"),e.save=function(){var a={action:e.saveAction,data:e.appVersion,versionType:e.versionType};t.close(a)},e.toggleAct=function(){"1"==e.appVersion.active?(e.appVersion.active="0",e.toggleActLabel="Activate"):(e.appVersion.active="1",e.toggleActLabel="Deactivate"),e.save()},e["delete"]=function(){var a={action:"delete",data:e.appVersion,versionType:e.versionType};t.close(a)},e.booleanActive=[{id:"1",title:"Yes"},{id:"0",title:"No"}],e.cancel=function(){t.dismiss("cancel")},e.$on("modal.closing",function(e,t,a){if("object"==typeof t&&"update"===t.action)message="Save changes?";else if("object"==typeof t&&"create"===t.action)message="Publish new version?";else if("object"==typeof t&&"delete"===t.action)message="WARNING: This action cannot be undone! Are you sure you want to delete this entry?";else switch(t){case"backdrop click":message="Any changes will be lost, are you sure?";break;case"cancel":message="Any changes will be lost, are you sure?";break;case"escape key press":message="Any changes will be lost, are you sure?";break;default:console.log("modal.closing: "+(a?"close":"dismiss")+"("+t+")")}confirm(message)||e.preventDefault()}),e.autoExpand=function(e){var t="object"==typeof e?e.target:document.getElementById(e);t.style.height=t.scrollHeight+2+"px"},e.revertForm=function(){e.appVersion=angular.copy(e.appVersion_original),e.myForm.$setPristine()},e.onShow=function(){o(s,0)}}]),angular.module("appViewCtrl",["timeMathFltr","confirm"]).controller("appViewCtrl",["$scope","$uibModalInstance","app","appID","available_engines","$timeout",function(e,t,a,r,o,n){function i(){e.autoExpand("email_body")}e.app=Object.create(a),e.app.id=r,e.available_engines=o,e.saveLabel="Save Application",e.saveAction="save",e.save=function(){var a={action:e.saveAction,data:e.app};t.close(a)},e.cancel=function(){t.dismiss("cancel")},e.$on("modal.closing",function(e,t,a){var r="You are about to leave the edit view. Uncaught reason. Are you sure?";if("object"==typeof t&&"save"===t.action)r="Save changes?";else switch(t){case"backdrop click":r="Any changes will be lost, are you sure?";break;case"cancel":r="Any changes will be lost, are you sure?";break;case"escape key press":r="Any changes will be lost, are you sure?";break;default:console.log("modal.closing: "+(a?"close":"dismiss")+"("+t+")")}confirm(r)||e.preventDefault()}),e.autoExpand=function(e){var t="object"==typeof e?e.target:document.getElementById(e);t.style.height=t.scrollHeight+2+"px"},e.onShow=function(){n(i,0),e.app.id||(delete e.app.id,e.saveLabel="Create Application",e.saveAction="saveNew",e.newApp="New Application")}}]),angular.module("gameVersionViewCtrl",["timeMathFltr","confirm"]).controller("gameVersionViewCtrl",["$scope","$uibModalInstance","gameVersion","game_id","$timeout","app_list","$rootScope",function(e,t,a,r,o,n,i){function s(){e.autoExpand("game_vers_comments")}e.gameVersion_original=a,e.gameVersion=Object.create(a),e.gameVersion.id=r,e.app_list=n,e.newgameVersion="Viewing Game Version: ",e.saveLabel="Save",e.saveAction="update",e.versionType="game",e.gameVersion.id||(delete e.gameVersion.id,e.saveLabel="Publish",e.saveAction="create",e.newgameVersion="New Game Version",e.gameVersion.added_by=i.uid,e.gameVersion.is_supported="1",e.gameVersion.should_update="0",e.gameVersion.should_redirect="0"),e.gameVersion_original=angular.copy(e.gameVersion),"0"==e.gameVersion.active&&(e.toggleActLabel="Activate"),e.save=function(){var a={action:e.saveAction,data:e.gameVersion,versionType:e.versionType};t.close(a)},e["delete"]=function(){var a={action:"delete",data:e.gameVersion,versionType:e.versionType};t.close(a)},e.booleanActive=[{id:"1",title:"Yes"},{id:"0",title:"No"}],e.cancel=function(){t.dismiss("cancel")},e.$on("modal.closing",function(e,t,a){if("object"==typeof t&&"update"===t.action)message="Save changes?";else if("object"==typeof t&&"create"===t.action)message="Publish new version?";else if("object"==typeof t&&"delete"===t.action)message="WARNING: This action cannot be undone! Are you sure you want to delete this entry?";else switch(t){case"backdrop click":message="Any changes will be lost, are you sure?";break;case"cancel":message="Any changes will be lost, are you sure?";break;case"escape key press":message="Any changes will be lost, are you sure?";break;default:console.log("modal.closing: "+(a?"close":"dismiss")+"("+t+")")}confirm(message)||e.preventDefault()}),e.autoExpand=function(e){var t="object"==typeof e?e.target:document.getElementById(e);t.style.height=t.scrollHeight+2+"px"},e.revertForm=function(){e.gameVersion=angular.copy(e.gameVersion_original),e.myForm.$setPristine()},e.onShow=function(){o(s,0)}}]),angular.module("graphViewCtrl",[]).controller("graphViewCtrl",["$scope","$uibModalInstance","graphURL","graphLabel",function(e,t,a,r){e.graphURL=a,e.graphLabel=r,e.close=function(){t.dismiss("close")}}]),angular.module("memberViewCtrl",["timeMathFltr","confirm"]).controller("memberViewCtrl",["$scope","$uibModalInstance","member","memberID","$timeout","Data","orderFuncs",function(e,t,a,r,o,n,i){function s(){n.post("getAccountDetails",{email:e.member.member_email,orderID:"0",action:"get"}).then(function(t){var a=JSON.parse(t.message);e.relatedOrders=a.relatedOrders,e.count={},e.count.act=a.count.act,e.count.CID=a.count.CID,e.expiryDt=a.member_details.expiry,a.member_details.deactivated?e.deactivated=!0:e.deactivated=!1,a.member_details.blacklisted?e.blacklisted=!0:e.blacklisted=!1,e.comments=a.member_details.comments,e.myComments=angular.copy(e.comments),e.myForm.$setPristine(),e.isDeactivated(),o(l,0)})}function l(){e.autoExpand("myComments")}e.member=a,e.member.id=r,e.saveLabel="Save Member",e.saveAction="save",e.newLabel="Member #",e.activatedAction="Deactivate",e.blacklistedAction="Lift Blacklist",e.deactivatedMsg="",e.blacklistedMsg="",e.deactivated=!1,e.blacklisted=!1,e.save=function(){var a={action:e.saveAction,data:e.member};t.close(a)},e.resendConfirmation=function(){i.resendConfirmationEmail(null,e.member.id)},e.regenerateKey=function(){i.regenerateKey(null,e.member.id).then(function(t){e.member.member_act_key=t.new_key,n.toastMsg(t.status,t.message)})},e.getUserDetails=function(){e.member.id&&(e.member.expiry_date?s():n.post("getMemberDetails",{memberID:e.member.id,action:"get"}).then(function(t){var a=JSON.parse(t.message),r=e.member.id;e.member=a.columns,e.member.id=r,s()}))},e.isDeactivated=function(){return 1==e.member.deactivated?(e.activatedAction="Reactivate",e.deactivatedMsg='<span class="glyphicon glyphicon-warning-sign"></span> deactivated <span class="glyphicon glyphicon-warning-sign"></span>',!0):(e.activatedAction="Deactivate",!1)},e.setDeactivated=function(t){t?n.toastMsg("info","Deactivating..."):n.toastMsg("info","Reactivating..."),i.setDeactivated(null,e.member.id,t).then(function(a){"success"==a.status&&(e.deactivated=t,t?e.member.deactivated=1:e.member.deactivated=0,e.isDeactivated(),n.toastMsg("success","Saved"))})},e.isBlacklisted=function(){return 1==e.member.blacklisted?(e.blacklistedAction="Lift Blacklist",e.blacklistedMsg='<span class="glyphicon glyphicon-alert"></span> BLACKLISTED <span class="glyphicon glyphicon-alert"></span>',!0):(e.blacklistedAction="Blacklisted",!1)},e.toggleActivation=function(){if(e.deactivated)var t=!1;else var t=!0;n.post("account",{email:e.member.member_email,deactivated:t,action:"updateActive"}).then(function(t){JSON.parse(t.message);e.deactivated?e.deactivated=!0:e.deactivated=!1})},e.revertNotes=function(){e.myComments=angular.copy(e.comments),e.myForm.$setPristine()},e.saveNotes=function(){console.log("Saving notes: "+e.myComments),n.post("updateComments",{member_email:e.member.member_email,member_comments:e.myComments,target:"member",action:"update"}).then(function(t){JSON.parse(t.message);e.comments=e.myComments,e.revertNotes(),n.toastMsg("success","Notes Updated")})},e.openOrder=function(a){var r={action:"openingOrder",data:a};i.viewOrder(a,e.orders),t.close(r)},e.cancel=function(){t.dismiss("cancel")},e.$on("modal.closing",function(e,t,a){var r="You are about to leave the edit view. Uncaught reason. Are you sure?",o=!0;if("object"==typeof t&&"save"===t.action)r="Save changes?";else if("object"==typeof t)o=!1;else switch(t){case"backdrop click":r="Any changes will be lost, are you sure?",o=!1;break;case"cancel":r="Any changes will be lost, are you sure?",o=!1;break;case"navOut":r="Any changes will be lost, are you sure?",o=!1;break;case"escape key press":r="Any changes will be lost, are you sure?",o=!1;break;default:r="Uncaught reason",console.log("modal.closing: "+(a?"close":"dismiss")+"("+t+")")}o&&!confirm(r)&&e.preventDefault()}),e.autoExpand=function(e){var t="object"==typeof e?e.target:document.getElementById(e);t.style.height=t.scrollHeight+2+"px"},e.onShow=function(){o(l,0),e.member.id||(delete e.member.id,e.saveLabel="Create Order",e.saveAction="saveNew",e.newLabel="New Manual Order")}}]),angular.module("orderViewCtrl",["timeMathFltr","confirm","orderFuncs"]).controller("orderViewCtrl",["$scope","$uibModalInstance","order","orderID","$timeout","Data","orderFuncs",function(e,t,a,r,o,n,i){function s(){n.post("getAccountDetails",{email:e.order.payer_email,orderID:e.order.id,action:"get"}).then(function(t){var a=JSON.parse(t.message);e.relatedOrders=a.relatedOrders,e.count={},e.count.act=a.count.act,e.count.CID=a.count.CID,e.expiryDt=a.member_details.expiry,e.member_id=a.member_details.member_id,a.member_details.deactivated?e.deactivated=!0:e.deactivated=!1,a.member_details.blacklisted?e.blacklisted=!0:e.blacklisted=!1,e.comments=a.member_details.comments,e.myComments=angular.copy(e.comments),e.myForm.$setPristine(),e.isDeactivated(),o(l,0)})}function l(){e.autoExpand("myComments")}e.order=a,e.order.id=r,e.saveLabel="Save Order",e.saveAction="save",e.newLabel="Order #",e.activatedAction="Deactivate",e.deactivatedMsg="",e.deactivated=!1,e.save=function(){var a={action:e.saveAction,data:e.order};t.close(a)},e.resendConfirmation=function(){i.resendConfirmationEmail(e.order.id,null)},e.regenerateKey=function(){i.regenerateKey(e.order.id,null).then(function(t){e.order.license=t.new_key,n.toastMsg(t.status,t.message)})},e.setDeactivated=function(t){t?n.toastMsg("info","Deactivating..."):n.toastMsg("info","Reactivating..."),i.setDeactivated(e.order.id,null,t).then(function(a){"success"==a.status&&(e.deactivated=t,t?e.order.deactivated=1:e.order.deactivated=0,e.isDeactivated(),n.toastMsg("success","Saved"))})},e.getUserDetails=function(){e.order.id&&(e.order.business?s():n.post("getOrderDetails",{orderID:e.order.id,action:"get"}).then(function(t){var a=JSON.parse(t.message),r=e.order.id;e.order=a.columns,e.order.id=r,s()}))},e.viewMember=function(){var a={action:"viewMember",data:e.member_id};t.close(a)},e.isDeactivated=function(){return e.deactivated?(e.activatedAction="Reactivate",e.deactivatedMsg='<span class="glyphicon glyphicon-warning-sign"></span> account deactivated!',!0):(e.activatedAction="Deactivate",!1)},e.toggleActivation=function(){if(e.deactivated)var t=!1;else var t=!0;n.post("account",{email:e.order.payer_email,deactivated:t,action:"updateActive"}).then(function(t){JSON.parse(t.message);e.deactivated?e.deactivated=!0:e.deactivated=!1})},e.revertNotes=function(){e.myComments=angular.copy(e.comments),e.myForm.$setPristine()},e.saveNotes=function(){console.log("Saving notes: "+e.myComments),n.post("updateComments",{member_email:e.order.payer_email,member_comments:e.myComments,target:"member",action:"update"}).then(function(t){JSON.parse(t.message);e.comments=e.myComments,e.revertNotes(),n.toastMsg("success","Notes Updated")})},e.openOrder=function(a){var r={action:"viewingOtherOrder",data:a};i.viewOrder(a,e.orders),t.close(r)},e.cancel=function(){t.dismiss("cancel")},e.$on("modal.closing",function(e,t,a){var r="You are about to leave the edit view. Uncaught reason. Are you sure?",o=!0;if("object"==typeof t&&"save"===t.action)r="Save changes?";else if("object"==typeof t)o=!1;else switch(t){case"backdrop click":r="Any changes will be lost, are you sure?",o=!1;break;case"cancel":r="Any changes will be lost, are you sure?",o=!1;break;case"navOut":r="Any changes will be lost, are you sure?",o=!1;break;case"escape key press":r="Any changes will be lost, are you sure?",o=!1;break;default:r="Uncaught reason",console.log("modal.closing: "+(a?"close":"dismiss")+"("+t+")")}o&&!confirm(r)&&e.preventDefault()}),e.autoExpand=function(e){var t="object"==typeof e?e.target:document.getElementById(e);t.style.height=t.scrollHeight+2+"px"},e.onShow=function(){o(l,0),e.order.id||(delete e.order.id,e.saveLabel="Create Order",e.saveAction="saveNew",e.newLabel="New Manual Order")}}]),angular.module("unknownVersionViewCtrl",["timeMathFltr","confirm"]).controller("unknownVersionViewCtrl",["$scope","$uibModalInstance","unknownVersion","id","$timeout",function(e,t,a,r,o){function n(){e.autoExpand("comments")}e.unknownVersion_original=a,
e.unknownVersion=Object.create(a),e.unknownVersion.id=r,e.newunknownVersion="Viewing Unknown Version: ",e.saveLabel="Save",e.saveAction="update",e.versionType="unknown",e.unknownVersion_original=angular.copy(e.unknownVersion),"0"==e.unknownVersion.active&&(e.toggleActLabel="Activate"),e.save=function(){var a={action:e.saveAction,data:e.unknownVersion,versionType:e.versionType};t.close(a)},e.register=function(){alert("not yet done")},e.booleanActive=[{id:"1",title:"Yes"},{id:"0",title:"No"}],e.cancel=function(){t.dismiss("cancel")},e.$on("modal.closing",function(e,t,a){if("object"==typeof t&&"update"===t.action)message="Save changes?";else if("object"==typeof t&&"create"===t.action)message="Publish new version?";else if("object"==typeof t&&"delete"===t.action)message="WARNING: This action cannot be undone! Are you sure you want to delete this entry?";else switch(t){case"backdrop click":message="Any changes will be lost, are you sure?";break;case"cancel":message="Any changes will be lost, are you sure?";break;case"escape key press":message="Any changes will be lost, are you sure?";break;default:console.log("modal.closing: "+(a?"close":"dismiss")+"("+t+")")}confirm(message)||e.preventDefault()}),e.autoExpand=function(e){var t="object"==typeof e?e.target:document.getElementById(e);t.style.height=t.scrollHeight+2+"px"},e.revertForm=function(){e.unknownVersion=angular.copy(e.unknownVersion_original),e.myForm.$setPristine()},e.onShow=function(){o(n,0)}}]),function(){angular.module("confirm",[]).directive("confirm",[function(){return{priority:100,restrict:"A",link:{pre:function(e,t,a){var r=a.confirm||"Are you sure?";t.bind("click",function(e){confirm(r)||(e.stopImmediatePropagation(),e.preventDefault)})}}}}])}(),function(){angular.module("graphsDirective",["chart.js"]).directive("renderGraphs",function(){return{restrict:"E",scope:{graphKeys:"=?",type:"=?",wrap:"=?"},template:'<div ng-include="contentUrl"></div>',link:function(e,t,a){e.wrap?e.contentUrl="partials/subelements/graphs_wrapped.html":e.contentUrl="partials/subelements/graphs.html"},controller:["$scope","$location","Graphs",function(e,t,a){console.log("Getting graphs("+e.graphKeys+")"),a.get(e.graphKeys).then(function(t){e.graphs=t,console.log(e.graphs);for(var a in t){var r=t[a];console.log("Chart ("+a+") performance "+r.debug.time_taken)}}),e.shouldWrap=function(){return e.wrap?e.wrap:!1},e.fullscreen=function(t){t.preventDefault();var a=t.currentTarget,r=a.getElementsByTagName("i")[0].classList,o=a.closest(".thumbnail");r.contains("glyphicon-resize-full")?(r.remove("glyphicon-resize-full"),r.add("glyphicon-resize-small"),o.classList.add("panel-fullscreen"),e.chart.legend=!0):r.contains("glyphicon-resize-small")&&(r.remove("glyphicon-resize-small"),r.add("glyphicon-resize-full"),o.classList.remove("panel-fullscreen"),e.chart.legend=!1),e.$emit("fullscreen_toggle",[])},e.chart={},e.chart.options={},e.$on("create",function(t,a){e.chart=a,e.chart.options.pointDotRadius=0,e.chart.legend=!1,e.chart.options.scaleBeginAtZero=!1}),e.$on("fullscreen_toggle",function(e,t){window.dispatchEvent(new Event("resize"))}),e.onClick=function(e,t){console.log(e,t)}}],controllerAs:"graphsCtrl"}})}(),function(){angular.module("activationsTable",["timeMathFltr","ngTable","toaster"]).directive("activationsTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/activationsTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location","$rootScope",function(e,t,a,r,o,n,i){e.activations={},e.total={};var s=this;e.appList=function(){return i.appList},e.getAppName=function(t){return e.appList()[t].title},this.status=[{id:"",title:""},{id:"failure",title:"failure"},{id:"success",title:"success"}],e.status=function(e){return s.status},e.filters={app_id:"",email:"",dt:"",ip:"",request_location:"",version_tool:"",version_payload:"",activation_status:""},e.prepareTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};var l=n.search();for(var c in e.filters)c in l&&(e.filters[c]=l[c]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,l.page&&(e.pagination.currentPage=l.page),l.n&&(e.pagination.perPage=l.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{app_id:"",email:"",dt:"DESC",ip:"",request_location:"",version_tool:"",version_payload:"",activation_status:""},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getActivations",{form:i}).then(function(t){e.activations=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.activations,n.filter()):e.activations;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("appsTable",["ui.bootstrap","timeMathFltr","appViewCtrl","twoButtonBar"]).directive("appsTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/appsTable.html",scope:{},controller:["$scope","Data","$uibModal","$rootScope",function(e,t,a,r){e.getApplications=function(){t.post("getApplications",{}).then(function(t){e.apps=JSON.parse(t.message),e.totalApps=t.total,e.available_engines=t.available_engines})},e.temp=1,e.openApp=function(r){if(r)var o=e.apps[r].columns;else{var o={};r=0}var n=a.open({animation:!0,templateUrl:"partials/pages/tables/sub/appView.html",controller:"appViewCtrl",size:"lg",windowClass:"app-modal-window",resolve:{app:function(){return o},appID:function(){return r},available_engines:function(){return e.available_engines}}});n.result.then(function(a){if("save"===a.action){var r=a.data,o=e.apps[r.id].columns,n={};for(var i in o)o[i]!==a.data[i]&&(n[i]=a.data[i]);t.post("application",{updateObject:n,updateID:r.id,action:"update"}).then(function(a){var r=JSON.parse(a.message);e.apps[r.id].columns=r.columns,t.toastMsg("success","App Updated")})}else"saveNew"===a.action&&t.post("application",{newAppDetails:a.data,action:"new"}).then(function(a){var r=JSON.parse(a.message);e.apps[r.id]=r,e.apps[r.id].columns=r.columns,t.toastMsg("success","New App Created")})},function(){console.log("Modal dismissed at: "+new Date)})}}],controllerAs:"appsTable"}})}(),function(){angular.module("logsCIDTable",["timeMathFltr","ngTable","toaster"]).directive("logsCidTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/logsCIDTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location",function(e,t,a,r,o,n){e.logs={},e.total={},e.tableAlias="logs_CID";e.actionTypes={},e.filters={email:"",syskey:"",IP:"",dt:""};var i=n.search();for(var s in e.filters)s in i&&(e.filters[s]=i[s]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,i.page&&(e.pagination.currentPage=i.page),i.n&&(e.pagination.perPage=i.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{email:"",syskey:"",IP:"",dt:"desc"},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getCIDLogs",{form:i}).then(function(t){e.logs=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.logs,n.filter()):e.logs;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("logsDeactTable",["timeMathFltr","ngTable","toaster"]).directive("logsDeactTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/logsDeactTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location",function(e,t,a,r,o,n){e.logs={},e.total={},e.tableAlias="logs_deact";e.actionTypes={},e.filters={email:"",syskey:"",IP:"",dt:""};var i=n.search();for(var s in e.filters)s in i&&(e.filters[s]=i[s]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,i.page&&(e.pagination.currentPage=i.page),i.n&&(e.pagination.perPage=i.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{email:"",syskey:"",IP:"",dt:"desc"},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getDeactLogs",{form:i}).then(function(t){e.logs=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.logs,n.filter()):e.logs;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("logsFailureTable",["timeMathFltr","ngTable","toaster"]).directive("logsFailureTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/logsFailureTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location",function(e,t,a,r,o,n){e.logs={},e.total={},e.tableAlias="logs_fail";e.actionTypes={},e.filters={email:"",actcode:"",IP:"",reason:"",dt:""};var i=n.search();for(var s in e.filters)s in i&&(e.filters[s]=i[s]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,i.page&&(e.pagination.currentPage=i.page),i.n&&(e.pagination.perPage=i.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{email:"",actcode:"",IP:"",reason:"",dt:"desc"},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getFailLogs",{form:i}).then(function(t){e.logs=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.logs,n.filter()):e.logs;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("logsSystemTable",["timeMathFltr","ngTable","toaster"]).directive("logsSystemTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/logsSystemTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location",function(e,t,a,r,o,n){e.logs={},e.total={},e.tableAlias="logs_system";e.actionTypes={},e.filters={email:"",action:"",reason:"",dt:"","new":""};var i=n.search();for(var s in e.filters)s in i&&(e.filters[s]=i[s]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,i.page&&(e.pagination.currentPage=i.page),i.n&&(e.pagination.perPage=i.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{email:"",action:"",reason:"",dt:"desc","new":""},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getSystemLogs",{form:i}).then(function(t){e.logs=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered,e.actionTypes=JSON.parse(t.actions),e.actionTypes.splice(0,0,{id:"",title:""});var i=n.filter()?r("filter")(e.logs,n.filter()):e.logs;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("membersTable",["timeMathFltr","ngTable","toaster","memberViewCtrl"]).directive("membersTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/membersTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location","$uibModal","memberFuncs",function(e,t,a,r,o,n,i,s){e.members={},e.total={};e.filters={member_name:"",member_email:"",last_purchase:"",expiry_date:"",deactivated:"",blacklisted:""},e.filterDeactivated=function(){e.filters.deactivated?e.filters.deactivated="":e.filters.deactivated="1",e.filters.blacklisted&&(e.filters.blacklisted=""),e.tableParams.reload()},e.filterBlacklisted=function(){e.filters.blacklisted?e.filters.blacklisted="":e.filters.blacklisted="1",e.filters.deactivated&&(e.filters.deactivated=""),e.tableParams.reload()},e.filterReset=function(){e.filters.member_name="",e.filters.member_email="",e.filters.last_purchase="",e.filters.expiry_date="",e.filters.deactivated="",e.filters.blacklisted="",e.tableParams.reload()};var l=n.search();for(var c in e.filters)c in l&&(e.filters[c]=l[c]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,l.page&&(e.pagination.currentPage=l.page),l.n&&(e.pagination.perPage=l.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.isExpired=function(e){var t=new Date(Date.parse(e.expiry_date)),a=new Date;return a>=t},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{member_name:"",member_email:"",last_purchase:"",expiry_date:"",activation_count:"",extension_count:"desc"},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getMembers",{form:i}).then(function(t){e.members=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.members,n.filter()):e.members;n.total(e.total),a.resolve(i)})}}),e.openMember=function(t){s.viewMember(t,e.members)},e.openOrder=function(t){ordesadfrFuncs.viewOrder(t,e.orders)}}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("ordersTable",["timeMathFltr","ngTable","toaster","twoButtonBar","orderFuncs"]).directive("ordersTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/ordersTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location","$rootScope","$uibModal","orderFuncs",function(e,t,a,r,o,n,i,s,l){e.orders={},e.total={};var c=this;this.orderTypes=[{id:"",title:""},{id:"PayPal",title:"PayPal"},{id:"Manual",title:"Manual"}],e.getOrderTypes=function(e){return c.orderTypes},e.appList=function(){return i.appList},e.getAppName=function(t){return e.appList()[t].title},e.filters={app_id:"",last_name:"",payer_email:"",type:"",dt:""};var p=n.search();for(var u in e.filters)u in p&&(e.filters[u]=p[u]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,p.page&&(e.pagination.currentPage=p.page),p.n&&(e.pagination.perPage=p.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{item_name:"",last_name:"",payer_email:"",type:"",dt:"desc"},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getOrders",{form:i}).then(function(t){e.orders=JSON.parse(t.message),t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.orders,n.filter()):e.orders;n.total(e.total),a.resolve(i)})}}),e.openOrder=function(t){l.viewOrder(t,e.orders)}}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("versionsAppTable",["timeMathFltr","ngTable","toaster","versionFuncs"]).directive("versionsAppTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/versionsAppTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location","$rootScope","versionFuncs",function(e,t,a,r,o,n,i,s){e.versions={},e.total={};e.appList=function(){return i.appList},e.getAppName=function(t){return e.appList()[t].title},e.viewVersion=function(t,a){s.viewAppVersion(t,a,e.versions,e.appList()).then(function(t){e.tableParams.reload()})},e.filters={version:"",tool_or_payload:"",hash_string:"",date_added:"",game_version:""},e.prepareTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};var l=n.search();for(var c in e.filters)c in l&&(e.filters[c]=l[c]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,l.page&&(e.pagination.currentPage=l.page),l.n&&(e.pagination.perPage=l.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{version:"",tool_or_payload:"",hash_string:"",date_added:"desc",game_version:""},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getVersions",{form:i,versionType:"app"}).then(function(t){e.versions=t.message.app,t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.versions,n.filter()):e.versions;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("versionsGameTable",["timeMathFltr","ngTable","toaster","versionFuncs"]).directive("versionsGameTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/versionsGameTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location","$rootScope","versionFuncs",function(e,t,a,r,o,n,i,s){e.versions={},e.total={};e.appList=function(){return i.appList},e.getAppName=function(t){return e.appList()[t].title},e.viewVersion=function(t){s.viewGameVersion(t,e.versions,e.appList()).then(function(t){e.tableParams.reload()})},e.filters={game_name:"",vers_string:"",vers_bytes:""},e.prepareTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};var l=n.search();for(var c in e.filters)c in l&&(e.filters[c]=l[c]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,l.page&&(e.pagination.currentPage=l.page),l.n&&(e.pagination.perPage=l.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{game_name:"desc",vers_string:"",vers_bytes:"",is_supported:"",not_supported_text:"",should_update:"",should_update_text:"",should_redirect:"",should_update_URL:"",game_vers_comments:""},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getVersions",{form:i,versionType:"game"}).then(function(t){e.versions=t.message.game,t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.versions,n.filter()):e.versions;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("versionsUnknownTable",["timeMathFltr","ngTable","toaster","versionFuncs"]).directive("versionsUnknownTable",function(){return{restrict:"E",templateUrl:"partials/pages/tables/versionsUnknownTable.html",scope:{},controller:["$scope","Data","NgTableParams","$filter","toaster","$location","versionFuncs",function(e,t,a,r,o,n,i){e.versions={},e.total={};e.appList=function(){return $rootScope.appList},e.getAppName=function(t){return e.appList()[t].title},e.viewVersion=function(t){i.viewUnknownVersion(t,e.versions).then(function(t){e.tableParams.reload()})},e.filters={vers_bytes:"",date_added:"",last_use_attempt:"",use_count:"",submitter_email:""},e.prepareTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};var s=n.search();for(var l in e.filters)l in s&&(e.filters[l]=s[l]);e.pagination={},e.pagination.currentPage=1,e.pagination.perPage=20,s.page&&(e.pagination.currentPage=s.page),s.n&&(e.pagination.perPage=s.n),e.updateParamsPage=function(e){n.search("page",e)},e.updateParamsCount=function(e){n.search("n",e)},e.updateParamsFilters=function(e){for(param in e)e.hasOwnProperty(param)&&e[param]?n.search(param,e[param]):n.search(param,null)},e.tableParams=new a({page:e.pagination.currentPage,count:e.pagination.perPage,sorting:{vers_bytes:"",date_added:"",last_use_attempt:"desc",use_count:"",submitter_email:""},filter:e.filters},{filterSwitch:!0,total:0,filterOptions:{filterDelay:200},getData:function(a,n){var i={offset:(n.page()-1)*n.count(),limit:n.count(),filter:n.filter(),sorting:n.sorting()};e.updateParamsFilters(n.filter()),e.updateParamsPage(n.page()),e.updateParamsCount(n.count()),t.post("getVersions",{form:i,versionType:"unknown"}).then(function(t){e.versions=t.message.unknown,t.total!=e.total&&o.popSimple("success","",""+t.total+" results",2e3),e.total=t.total,e.isFiltered=t.filtered;var i=n.filter()?r("filter")(e.versions,n.filter()):e.versions;n.total(e.total),a.resolve(i)})}})}],controllerAs:"ordersCtrl"}})}(),function(){angular.module("threeButtonBar",[]).directive("threeButtonBar",function(){return{restrict:"E",templateUrl:"partials/pages/tables/buttons/threeButtonBar.html",replace:!0,scope:{showFilter:"=",tableParams:"=",tableAlias:"="},controller:["$scope","Data",function(e,t){e.markAsRead=function(a){var r={params:a};t.post("markAllAsRead",{form:r}).then(function(t){t.message?e.$parent.tableParams.reload():toaster.popSimple("error","markAllAsRead error","server error",2e3)})}}],controllerAs:"threeButtonCtrl"}})}(),function(){angular.module("twoButtonBar",[]).directive("twoButtonBar",function(){return{restrict:"E",templateUrl:"partials/pages/tables/buttons/twoButtonBar.html",replace:!0,scope:{showFilter:"=",tableParams:"="},controller:function(){},controllerAs:"twoButtonCtlr"}})}();
//# sourceMappingURL=app.js.map
